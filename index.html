<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jesse's Gym Journey - Kom op Jesse!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Black', 'Helvetica Bold', sans-serif;
            background: linear-gradient(135deg, #1A1E23 0%, #2E343B 100%);
            color: white;
            overflow-x: hidden;
        }

        .header {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(rgba(26,30,35,0.8), rgba(46,52,59,0.8)), url('./header-bg.jpg');
            background-size: cover;
            background-position: center;
        }

        .header h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            animation: pulse 2s infinite;
        }

        .header p {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .motivation-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            text-align: center;
        }

        .motivation-text {
            font-size: 3rem;
            max-width: 800px;
            margin: 2rem 0;
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
        }

        .motivation-text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .motivation-text.highlight {
            color: #E85F0C;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .ai-motivation-btn {
            background: linear-gradient(135deg, #E85F0C 0%, #003DFF 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(232,95,12,0.3);
        }

        .ai-motivation-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        .ai-motivation-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .workout-section {
            padding: 4rem 2rem;
            background: rgba(0,0,0,0.1);
        }

        .workout-section h2 {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 3rem;
            color: #E85F0C;
        }

        .workout-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .workout-day {
            background: rgba(46,52,59,0.8);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(232,95,12,0.3);
            transition: transform 0.3s ease;
        }

        .workout-day:hover {
            transform: translateY(-10px);
        }

        .workout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .toggle-btn {
            background: #E85F0C;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .toggle-btn:hover {
            background: #003DFF;
            transform: scale(1.05);
        }

        .alternative-btn {
            background: #003DFF;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }

        .alternative-btn:hover {
            background: #E85F0C;
            transform: scale(1.05);
        }

        .workout-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .workout-content.expanded {
            max-height: 500px;
        }

        .workout-day h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #E85F0C;
            text-align: center;
        }

        .workout-day ul {
            list-style: none;
            padding: 0;
        }

        .workout-day li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 1.1rem;
        }

        .workout-day li:last-child {
            border-bottom: none;
        }

        .footer {
            text-align: center;
            padding: 3rem 2rem;
            background: rgba(0,0,0,0.3);
        }

        .footer h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #E85F0C;
        }

        /* Chatbox styling */
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .chat-header {
            background: linear-gradient(135deg, #E85F0C 0%, #003DFF 100%);
            color: white;
            padding: 15px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .chat-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            color: #333;
        }

        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
            max-width: 80%;
        }

        .user-message {
            background: #003DFF;
            color: white;
            margin-left: auto;
        }

        .bot-message {
            background: #f0f0f0;
            color: #333;
        }

        .chat-input {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .chat-input button {
            background: #E85F0C;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }

        .chat-input button:hover {
            background: #003DFF;
        }

        .chat-container.minimized {
            height: 60px;
        }

        .chat-container.minimized .chat-messages,
        .chat-container.minimized .chat-input {
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            .motivation-text {
                font-size: 2rem;
            }
            .workout-day h3 {
                font-size: 1.5rem;
            }
            .chat-container {
                width: 90%;
                right: 5%;
                left: 5%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>KOM OP JESSE! üí™</h1>
        <p>Jij kan dit! Elke dag is een nieuwe kans om sterker te worden!</p>
    </div>

            <div class="motivation-section">
            <div class="motivation-text" data-text="üí™ ELKE REP BRENGT JE DICHTER BIJ JE DOEL! üèãÔ∏è‚Äç‚ôÇÔ∏è">
                üí™ ELKE REP BRENGT JE DICHTER BIJ JE DOEL! üèãÔ∏è‚Äç‚ôÇÔ∏è
            </div>
            <div class="motivation-text" data-text="üî• GEEN EXCUSES, ALLEEN RESULTATEN! üí™">
                üî• GEEN EXCUSES, ALLEEN RESULTATEN! üí™
            </div>
            <div class="motivation-text" data-text="üí™ JIJ BENT STERKER DAN JE DENKT! üöÄ">
                üí™ JIJ BENT STERKER DAN JE DENKT! üöÄ
            </div>
            <div class="motivation-text" data-text="üöÄ VANDAAG IS DE DAG OM TE KNALLEN! üí™">
                üöÄ VANDAAG IS DE DAG OM TE KNALLEN! üí™
            </div>
            <div class="motivation-text" data-text="üí™ ZET DOOR, OOK ALS HET ZWAAR WORDT! üî•">
                üí™ ZET DOOR, OOK ALS HET ZWAAR WORDT! üî•
            </div>
            <div class="motivation-text" data-text="üèÜ ELKE DAG TELT! üí™">
                üèÜ ELKE DAG TELT! üí™
            </div>
            <div class="motivation-text" data-text="‚ö° JIJ BENT EEN KRIJGER! üí™">
                ‚ö° JIJ BENT EEN KRIJGER! üí™
            </div>
            <div class="motivation-text" data-text="üéØ FOCUS OP JE DOEL! üöÄ">
                üéØ FOCUS OP JE DOEL! üöÄ
            </div>
            <button id="aiMotivationBtn" class="ai-motivation-btn" onclick="getAIMotivation()">
                üöÄ KRIJG AI MOTIVATIE! üí™
            </button>
        </div>

    <div class="workout-section">
        <h2>üèãÔ∏è‚Äç‚ôÇÔ∏è JESSE'S TRAININGSSCHEMA üèãÔ∏è‚Äç‚ôÇÔ∏è</h2>
        <div class="workout-grid">
            <div class="workout-day">
                <div class="workout-header">
                    <h3>DAG 1: BORST & TRICEPS</h3>
                    <button class="toggle-btn" onclick="toggleWorkout(this)">üìã Toon Schema</button>
                </div>
                <div class="workout-content">
                    <ul>
                        <li>üèãÔ∏è Bankdrukken - 4 sets x 8-12 reps</li>
                        <li>üí™ Dumbbell Flyes - 3 sets x 12-15 reps</li>
                        <li>üî• Push-ups - 3 sets x max reps</li>
                        <li>üí™ Tricep Dips - 3 sets x 10-15 reps</li>
                        <li>üî• Tricep Pushdowns - 3 sets x 12-15 reps</li>
                        <li>üí™ Close-Grip Bench Press - 3 sets x 8-12 reps</li>
                    </ul>
                    <button class="alternative-btn" onclick="generateAlternatives(this, 'chest')">üîÑ Bedenk Alternatief</button>
                </div>
            </div>
            <div class="workout-day">
                <div class="workout-header">
                    <h3>DAG 2: RUG & BICEPS</h3>
                    <button class="toggle-btn" onclick="toggleWorkout(this)">üìã Toon Schema</button>
                </div>
                <div class="workout-content">
                    <ul>
                        <li>üí™ Pull-ups - 4 sets x max reps</li>
                        <li>üèãÔ∏è Barbell Rows - 4 sets x 8-12 reps</li>
                        <li>üî• Lat Pulldown - 3 sets x 10-15 reps</li>
                        <li>üí™ Bicep Curls - 3 sets x 12-15 reps</li>
                        <li>üî• Hammer Curls - 3 sets x 12-15 reps</li>
                        <li>üí™ Preacher Curls - 3 sets x 10-12 reps</li>
                    </ul>
                    <button class="alternative-btn" onclick="generateAlternatives(this, 'back')">üîÑ Bedenk Alternatief</button>
                </div>
            </div>
            <div class="workout-day">
                <div class="workout-header">
                    <h3>DAG 3: BENEN & SCHOUDERS</h3>
                    <button class="toggle-btn" onclick="toggleWorkout(this)">üìã Toon Schema</button>
                </div>
                <div class="workout-content">
                    <ul>
                        <li>üèãÔ∏è Squats - 4 sets x 8-12 reps</li>
                        <li>üî• Lunges - 3 sets x 12 reps per been</li>
                        <li>üí™ Leg Press - 3 sets x 10-15 reps</li>
                        <li>üî• Shoulder Press - 4 sets x 8-12 reps</li>
                        <li>üí™ Side Raises - 3 sets x 12-15 reps</li>
                        <li>üî• Rear Delt Flyes - 3 sets x 12-15 reps</li>
                    </ul>
                    <button class="alternative-btn" onclick="generateAlternatives(this, 'legs')">üîÑ Bedenk Alternatief</button>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <h3>üöÄ JESSE, JIJ GAAT DIT KILLEN! üöÄ</h3>
        <p>Gym Zeewolde wacht op je! Elke dag is een nieuwe kans om te groeien!</p>
    </div>

    <!-- Chatbox -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <h3>üí¨ Max - Jesse's Trainer</h3>
            <button class="chat-toggle" onclick="toggleChat()">‚àí</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                Hey Jesse! üí™ Ik ben je persoonlijke fitness coach. Stel me vragen over oefeningen, spiergroepen of training! 
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Stel je vraag..." onkeypress="handleChatKeyPress(event)">
            <button onclick="sendMessage()">üì§</button>
        </div>
    </div>

    <script>
        // Scroll-geactiveerde motiverende teksten
        const motivationTexts = document.querySelectorAll('.motivation-text');
        
        const observerOptions = {
            threshold: 0.5,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Voeg highlight toe aan willekeurige woorden
                    setTimeout(() => {
                        entry.target.classList.add('highlight');
                    }, 500);
                } else {
                    entry.target.classList.remove('visible', 'highlight');
                }
            });
        }, observerOptions);

        motivationTexts.forEach(text => {
            observer.observe(text);
        });

        // Extra motivatie bij scrollen
        let lastScrollTop = 0;
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > lastScrollTop) {
                // Scroll naar beneden - voeg extra motivatie toe
                const randomTexts = [
                    "üí™ BLIJF DOORGAAN! üèãÔ∏è‚Äç‚ôÇÔ∏è",
                    "üî• JIJ BENT ONSTOPPABLE! ‚ö°",
                    "‚ö° ELKE STAP TELT! üí™",
                    "üèÜ JIJ WORDT STERKER! üöÄ",
                    "üöÄ FOCUS OP JE DOEL! üí™",
                    "üí™ PUSH JE LIMIETEN! üî•",
                    "üèãÔ∏è‚Äç‚ôÇÔ∏è JIJ KAN DIT! ‚ö°",
                    "üî• GEEN TERUGVAL! üí™",
                    "‚ö° ELKE REP TELT! üèÜ",
                    "üöÄ JIJ BENT EEN BEAST! üí™"
                ];
                
                if (Math.random() < 0.1) { // 10% kans
                    const randomText = randomTexts[Math.floor(Math.random() * randomTexts.length)];
                    showFloatingMotivation(randomText);
                }
            }
            lastScrollTop = scrollTop;
        });

        function showFloatingMotivation(text) {
            const floating = document.createElement('div');
            floating.textContent = text;
            floating.style.cssText = `
                position: fixed;
                top: ${Math.random() * 50 + 20}%;
                left: ${Math.random() * 60 + 20}%;
                background: rgba(232, 95, 12, 0.9);
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                font-weight: bold;
                font-size: 1.2rem;
                z-index: 1000;
                animation: floatUp 2s ease-out forwards;
                pointer-events: none;
            `;
            
            document.body.appendChild(floating);
            
            setTimeout(() => {
                document.body.removeChild(floating);
            }, 2000);
        }

        // Voeg CSS animatie toe voor floating tekst
        const style = document.createElement('style');
        style.textContent = `
            @keyframes floatUp {
                0% { opacity: 0; transform: translateY(20px); }
                20% { opacity: 1; transform: translateY(0); }
                80% { opacity: 1; transform: translateY(-20px); }
                100% { opacity: 0; transform: translateY(-40px); }
            }
        `;
        document.head.appendChild(style);

        // Uitklapbare trainingsschema's
        function toggleWorkout(button) {
            const workoutContent = button.closest('.workout-day').querySelector('.workout-content');
            const isExpanded = workoutContent.classList.contains('expanded');
            
            if (isExpanded) {
                workoutContent.classList.remove('expanded');
                button.textContent = 'üìã Toon Schema';
            } else {
                workoutContent.classList.add('expanded');
                button.textContent = 'üìã Verberg Schema';
            }
        }

        // Alternatieve oefeningen genereren
        const alternativeExercises = {
            chest: [
                'üèãÔ∏è Incline Bench Press - 4 sets x 8-12 reps',
                'üí™ Cable Flyes - 3 sets x 12-15 reps',
                'üî• Decline Push-ups - 3 sets x max reps',
                'üí™ Dumbbell Press - 4 sets x 8-12 reps',
                'üî• Machine Chest Press - 3 sets x 10-15 reps',
                'üí™ Resistance Band Push-ups - 3 sets x max reps'
            ],
            back: [
                'üí™ Assisted Pull-ups - 4 sets x max reps',
                'üèãÔ∏è T-Bar Rows - 4 sets x 8-12 reps',
                'üî• Seated Cable Rows - 3 sets x 10-15 reps',
                'üí™ Concentration Curls - 3 sets x 12-15 reps',
                'üî• Cable Curls - 3 sets x 12-15 reps',
                'üí™ Incline Dumbbell Curls - 3 sets x 10-12 reps'
            ],
            legs: [
                'üèãÔ∏è Front Squats - 4 sets x 8-12 reps',
                'üî• Bulgarian Split Squats - 3 sets x 12 reps per been',
                'üí™ Hack Squat Machine - 3 sets x 10-15 reps',
                'üî• Military Press - 4 sets x 8-12 reps',
                'üí™ Arnold Press - 3 sets x 12-15 reps',
                'üî• Upright Rows - 3 sets x 12-15 reps'
            ]
        };
        // Uitgebreide alternatieve oefeningen
        const extendedAlternativeExercises = {
            chest: [
                'üèãÔ∏è Incline Bench Press - 4 sets x 8-12 reps',
                'üí™ Cable Flyes - 3 sets x 12-15 reps',
                'üî• Decline Push-ups - 3 sets x max reps',
                'üí™ Dumbbell Press - 4 sets x 8-12 reps',
                'üî• Machine Chest Press - 3 sets x 10-15 reps',
                'üí™ Resistance Band Push-ups - 3 sets x max reps',
                'üèãÔ∏è Smith Machine Press - 4 sets x 8-12 reps',
                'üí™ Pec Deck Flyes - 3 sets x 12-15 reps',
                'üî• Diamond Push-ups - 3 sets x max reps',
                'üí™ Landmine Press - 4 sets x 8-12 reps',
                'üî• Medicine Ball Slams - 3 sets x 15 reps',
                'üí™ Plate Press - 3 sets x 12-15 reps',
                'üèãÔ∏è Guillotine Press - 4 sets x 8-12 reps',
                'üí™ Swiss Ball Press - 3 sets x 12-15 reps',
                'üî• Plyometric Push-ups - 3 sets x max reps',
                'üí™ Single-Arm Dumbbell Press - 3 sets x 10-12 reps'
            ],
            back: [
                'üí™ Assisted Pull-ups - 4 sets x max reps',
                'üèãÔ∏è T-Bar Rows - 4 sets x 8-12 reps',
                'üî• Seated Cable Rows - 3 sets x 10-15 reps',
                'üí™ Concentration Curls - 3 sets x 12-15 reps',
                'üî• Cable Curls - 3 sets x 12-15 reps',
                'üí™ Incline Dumbbell Curls - 3 sets x 10-12 reps',
                'üèãÔ∏è Deadlifts - 4 sets x 6-8 reps',
                'üí™ Face Pulls - 3 sets x 12-15 reps',
                'üî• Lat Pulldown Wide Grip - 3 sets x 10-15 reps',
                'üí™ Spider Curls - 3 sets x 12-15 reps',
                'üî• Reverse Flyes - 3 sets x 12-15 reps',
                'üí™ Zottman Curls - 3 sets x 10-12 reps',
                'üèãÔ∏è Rack Pulls - 4 sets x 6-8 reps',
                'üí™ Band Pull-Aparts - 3 sets x 15-20 reps',
                'üí™ Single-Arm Rows - 3 sets x 10-12 reps',
                'üí™ 21s Bicep Curls - 3 sets x 21 reps'
            ],
            legs: [
                'üèãÔ∏è Front Squats - 4 sets x 8-12 reps',
                'üî• Bulgarian Split Squats - 3 sets x 12 reps per been',
                'üí™ Hack Squat Machine - 3 sets x 10-15 reps',
                'üî• Military Press - 4 sets x 8-12 reps',
                'üí™ Arnold Press - 3 sets x 12-15 reps',
                'üî• Upright Rows - 3 sets x 12-15 reps',
                'üèãÔ∏è Romanian Deadlifts - 4 sets x 8-12 reps',
                'üí™ Leg Extensions - 3 sets x 12-15 reps',
                'üî• Leg Curls - 3 sets x 12-15 reps',
                'üí™ Lateral Raises - 3 sets x 12-15 reps',
                'üî• Box Jumps - 3 sets x 10 reps',
                'üí™ Calf Raises - 4 sets x 15-20 reps',
                'üèãÔ∏è Trap Bar Deadlifts - 4 sets x 6-8 reps',
                'üí™ Step-Ups - 3 sets x 12 reps per been',
                'üî• Pike Push-ups - 3 sets x max reps',
                'üí™ Shrugs - 3 sets x 12-15 reps',
                'üèãÔ∏è Goblet Squats - 4 sets x 10-12 reps',
                'üí™ Lateral Lunges - 3 sets x 10 reps per been',
                'üî• Pike Press - 3 sets x 8-12 reps',
                'üí™ Rear Delt Flyes - 3 sets x 12-15 reps'
            ]
        };

        async function generateAlternatives(button, muscleGroup) {
            const workoutContent = button.closest('.workout-content');
            const ul = workoutContent.querySelector('ul');
            
            // Toon loading
            button.textContent = 'ü§î AI denkt na...';
            button.disabled = true;
            
            try {
                const response = await fetch('/api/workout-suggestion', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        muscleGroup: muscleGroup,
                        difficulty: 'gemiddeld'
                    })
                });
                
                const data = await response.json();
                
                // Parse de workout response
                const exercises = data.workout.split('\n').filter(line => line.trim());
                
                // Vervang de oefeningen
                ul.innerHTML = '';
                exercises.forEach(exercise => {
                    const li = document.createElement('li');
                    li.textContent = exercise.trim();
                    ul.appendChild(li);
                });
                
                // Toon een motiverende melding
                showFloatingMotivation('üîÑ Nieuwe AI workout voor Jesse!');
                
            } catch (error) {
                // Fallback naar lokale oefeningen
                const exercises = extendedAlternativeExercises[muscleGroup];
                const shuffled = [...exercises].sort(() => Math.random() - 0.5);
                
                ul.innerHTML = '';
                shuffled.slice(0, 6).forEach(exercise => {
                    const li = document.createElement('li');
                    li.textContent = exercise;
                    ul.appendChild(li);
                });
                
                showFloatingMotivation('üîÑ Nieuwe uitdaging voor Jesse!');
            } finally {
                button.textContent = 'üîÑ Bedenk Alternatief';
                button.disabled = false;
            }
        }

        // Chatbox functionaliteit
        function toggleChat() {
            const container = document.getElementById('chatContainer');
            const toggle = document.querySelector('.chat-toggle');
            container.classList.toggle('minimized');
            
            if (container.classList.contains('minimized')) {
                toggle.textContent = '+';
            } else {
                toggle.textContent = '‚àí';
            }
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, 'user');
                input.value = '';
                
                // Toon loading indicator
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'message bot-message';
                loadingDiv.innerHTML = 'üí≠ <em>Max denkt na...</em>';
                document.getElementById('chatMessages').appendChild(loadingDiv);
                
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 seconden timeout
                    
                    const response = await fetch('/api/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message }),
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    // Verwijder loading indicator
                    document.getElementById('chatMessages').removeChild(loadingDiv);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    addMessage(data.response, 'bot');
                } catch (error) {
                    console.error('Chat error:', error);
                    
                    // Verwijder loading indicator
                    try {
                        document.getElementById('chatMessages').removeChild(loadingDiv);
                    } catch (e) {
                        // Loading div al weggehaald
                    }
                    
                    // Fallback response
                    const fallbackResponses = {
                        'borst': "üí™ JESSE, VOOR BORSTSPIEREN: BANKD RUKKEN, DUMBBELL PRESS, PUSH-UPS, CABLE FLYES ZIJN GEWELDIG! FOCUS OP 8-12 REPS VOOR SPIERGROEI! üèãÔ∏è‚Äç‚ôÇÔ∏è",
                        'rug': "üèãÔ∏è JESSE, VOOR RUGSPIEREN: PULL-UPS, DEADLIFTS, BARBELL ROWS, LAT PULLDOWN. ZORG VOOR GOEDE VORM! üí™",
                        'benen': "üî• JESSE, VOOR BEENSPIEREN: SQUATS, DEADLIFTS, LUNGES, LEG PRESS. BENEN ZIJN JE FUNDAMENT! ‚ö°",
                        'schouders': "üí™ JESSE, VOOR SCHOUDERS: MILITARY PRESS, LATERAL RAISES, ARNOLD PRESS. WERK ALLE DRIE DE KOPPEN! üöÄ",
                        'biceps': "üí™ JESSE, BICEPS: CURLS, HAMMER CURLS. TRICEPS: DIPS, PUSHDOWNS. ARMEN REAGEREN GOED OP VOLUME! üî•",
                        'motivatie': "üöÄ JESSE, JIJ BENT STERKER DAN JE DENKT! ELKE REP TELT. FOCUS OP PROGRESSIE, NIET PERFECTIE! üí™",
                        'sets': "üìä JESSE, VOOR SPIERGROEI: 3-4 SETS, 8-12 REPS. VOOR KRACHT: 4-5 SETS, 4-6 REPS. VOOR UITHOUDING: 2-3 SETS, 15+ REPS! üèãÔ∏è‚Äç‚ôÇÔ∏è"
                    };
                    
                    const messageLower = message.toLowerCase();
                    let fallbackResponse = "üí™ JESSE, STEL ME SPECIFIEKE VRAGEN OVER SPIERGROEPEN, OEFENINGEN, SETS/REPS, OF MOTIVATIE! IK HELP JE GRAAG VERDER!";
                    
                    for (const [keyword, response] of Object.entries(fallbackResponses)) {
                        if (messageLower.includes(keyword)) {
                            fallbackResponse = response;
                            break;
                        }
                    }
                    
                    addMessage(fallbackResponse, 'bot');
                }
            }
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            // Support voor HTML content (voor emoji's en formatting)
            if (sender === 'bot') {
                messageDiv.innerHTML = text;
            } else {
                messageDiv.textContent = text;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        async function getAIMotivation() {
            const btn = document.getElementById('aiMotivationBtn');
            const originalText = btn.textContent;
            
            btn.textContent = 'ü§î AI denkt na...';
            btn.disabled = true;
            
            try {
                const response = await fetch('/api/motivation');
                const data = await response.json();
                
                // Voeg nieuwe motivatie toe aan de sectie
                const motivationSection = document.querySelector('.motivation-section');
                const newMotivation = document.createElement('div');
                newMotivation.className = 'motivation-text';
                newMotivation.textContent = data.motivation;
                newMotivation.style.opacity = '0';
                newMotivation.style.transform = 'translateY(50px)';
                
                motivationSection.insertBefore(newMotivation, btn.parentNode);
                
                // Animeer de nieuwe motivatie
                setTimeout(() => {
                    newMotivation.style.transition = 'all 0.8s ease';
                    newMotivation.style.opacity = '1';
                    newMotivation.style.transform = 'translateY(0)';
                }, 100);
                
                // Toon floating motivatie
                showFloatingMotivation('üöÄ Nieuwe AI motivatie voor Jesse!');
                
            } catch (error) {
                showFloatingMotivation('üí™ Blijf doorgaan Jesse!');
            } finally {
                btn.textContent = originalText;
                btn.disabled = false;
            }
        }

        function generateFitnessResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // Simpele response logica (in een echte app zou je Gemini API gebruiken)
            if (message.includes('borst') || message.includes('chest')) {
                return "üí™ Voor borstspieren: Bankdrukken, Dumbbell Press, Push-ups, Cable Flyes zijn geweldig! Focus op 8-12 reps voor spiergroei.";
            } else if (message.includes('rug') || message.includes('back')) {
                return "üèãÔ∏è Voor rugspieren: Pull-ups, Deadlifts, Barbell Rows, Lat Pulldown. Zorg voor goede vorm!";
            } else if (message.includes('benen') || message.includes('legs')) {
                return "üî• Voor beenspieren: Squats, Deadlifts, Lunges, Leg Press. Benen zijn je fundament!";
            } else if (message.includes('schouders') || message.includes('shoulder')) {
                return "üí™ Voor schouders: Military Press, Lateral Raises, Arnold Press. Werk alle drie de koppen!";
            } else if (message.includes('biceps') || message.includes('triceps')) {
                return "üí™ Biceps: Curls, Hammer Curls. Triceps: Dips, Pushdowns. Armen reageren goed op volume!";
            } else if (message.includes('motivatie') || message.includes('motivation')) {
                return "üöÄ Jesse, jij bent sterker dan je denkt! Elke rep telt. Focus op progressie, niet perfectie!";
            } else if (message.includes('sets') || message.includes('reps')) {
                return "üìä Voor spiergroei: 3-4 sets, 8-12 reps. Voor kracht: 4-5 sets, 4-6 reps. Voor uithouding: 2-3 sets, 15+ reps!";
            } else {
                return "üí™ Stel me specifieke vragen over spiergroepen, oefeningen, sets/reps, of motivatie! Ik help je graag verder!";
            }
        }
    </script>
</body>
</html> 